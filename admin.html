<!doctype html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ููุญุฉ ุงูุชุญูู | Pixology</title>

    <link rel="manifest" href="manifest.webmanifest" />
    <meta name="theme-color" content="#0b1620" />

    <link rel="icon" type="image/png" href="icon-192.png" />
    <link rel="stylesheet" href="style.css?v=20260207" />
    <link rel="stylesheet" href="admin.css?v=20260207" />
  </head>

  <body class="admin-page">
    <!-- TOP BAR -->
    <header class="admin-topbar">
      <div class="admin-topbar__left">
        <button
          class="admin-burger"
          id="adminBurger"
          type="button"
          aria-label="ูุชุญ ุงููุงุฆูุฉ"
        >
          โฐ
        </button>
        <h1 class="admin-title">ููุญุฉ ุงูุชุญูู (Pixology)</h1>
      </div>

      <div class="admin-topbar__right actions">
        <input id="search" placeholder="ุจุญุซ ุจุงูุงุณู ุฃู ID..." />

        <select id="filterStage">
          <a class="link" href="review-proofs.html">๐งพ ูุฑุงุฌุนุฉ ุงูุฅุซุจุงุชุงุช</a>
          <option value="">ูู ุงูุญุงูุงุช</option>
          <option value="Active">Active</option>
          <option value="Inactive">Inactive</option>
          <option value="Certified">Certified</option>
        </select>

        <!-- ุฒุฑ ุงูุณูุจุฑ ุฃุฏูู (ูุฎูู ุงูุชุฑุงุถููุง) -->
        <a
          id="goSuper"
          class="btn btn--outline"
          href="super.html"
          style="display: none"
          >ุณูุจุฑ ุฃุฏูู</a
        >

        <button id="exportCsv" class="btn btn--outline" type="button">
          ุชุตุฏูุฑ CSV
        </button>
        <button id="logout" class="btn btn--outline" type="button">
          ุชุณุฌูู ุฎุฑูุฌ
        </button>

        <button id="btnAdminGoogle" class="btn btn--solid" type="button">
          ุชุณุฌูู ุฃุฏูู ุจุฌูุฌู
        </button>
      </div>
    </header>

    <div class="admin-layout">
      <!-- SIDEBAR -->
      <aside
        class="admin-sidebar"
        id="adminSidebar"
        aria-label="ูุงุฆูุฉ ููุญุฉ ุงูุชุญูู"
      >
        <a class="admin-side__brand" href="index.html">
          <span class="admin-side__dot"></span>
          <span>Pixology</span>
        </a>

        <nav class="admin-side__nav">
          <a class="admin-side__link is-active" href="admin.html"
            >ููุญุฉ ุงูุชุญูู</a
          >
          <a class="admin-side__link" href="dashboard.html">Dashboard</a>
          <a class="admin-side__link" href="tasks.html">ุงูููุงู</a>
          <a class="admin-side__link" href="leaderboard.html">ุงูุชุฑุชูุจ</a>
          <a class="admin-side__link" href="achievements.html">ุงูุฅูุฌุงุฒุงุช</a>
        </nav>

        <div class="admin-side__note">
          <p id="adminUidMsg" class="admin-uid"></p>
          <small class="muted"
            >ูู ูุด ุธุงูุฑ ูู ุจูุงูุงุช ุงูุฃุฏููุ ุชุฃูุฏ ุฅู ุญุณุงุจู Admin + Active ูู
            users.</small
          >
        </div>
      </aside>

      <!-- MAIN -->
      <main class="admin-main wrap">
        <!-- Login -->
        <section class="card" id="loginBox">
          <h2>ุชุณุฌูู ุฏุฎูู ุงูุฃุฏูู</h2>
          <div class="admin-grid-2">
            <input id="email" type="email" placeholder="Email" />
            <input id="password" type="password" placeholder="Password" />
          </div>
          <div class="admin-row">
            <button id="login" class="btn btn--solid" type="button">
              ุฏุฎูู
            </button>
            <p id="loginMsg" class="msg"></p>
          </div>
        </section>

        <!-- Data -->
        <section class="card" id="dataBox" style="display: none">
          <div class="admin-section__head">
            <h2>ุทูุจุงุช ุงูุชุทูุน (Pending)</h2>
            <div class="hint">
              * ุงุถุบุท ููุงููุฉ ูุฅุตุฏุงุฑ ID ุฑุณูู ูููู ุงูุทูุจ ููุงุฆูุฉ ุงููุชุทูุนูู
            </div>
          </div>

          <div class="tableWrap">
            <table>
              <thead>
                <tr>
                  <th>ููุช</th>
                  <th>ุงุณู</th>
                  <th>ุฑูู ุงููุงุชู</th>
                  <th>ุงูุฌูุณ</th>
                  <th>ุชุงุฑูุฎ ุงูุงูุถูุงู</th>
                  <th>ุงูุฏููุฉ</th>
                  <th>ููุงุญุธุงุช</th>
                  <th>ุฅุฌุฑุงุก</th>
                </tr>
              </thead>
              <tbody id="reqRows"></tbody>
            </table>
          </div>

          <div class="admin-split"></div>

          <div class="admin-section__head">
            <h2>ุฅุถุงูุฉ ูุชุทูุน ูุฏูููุง</h2>
            <div class="hint">* ููุฃุฏูู ููุท โ ููุทูุน Volunteer ID ุชููุงุฆู</div>
          </div>

          <div class="card admin-subcard">
            <div class="admin-grid-2">
              <input id="mName" placeholder="ุงุณู ุงููุชุทูุน" />
              <input id="mPhone" placeholder="ุฑูู ุงููุงุชู" />

              <select id="mGender">
                <option value="">ุงูุฌูุณ</option>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
              </select>

              <input
                id="mJoinedAt"
                placeholder="ุชุงุฑูุฎ ุงูุงูุถูุงู (ูุซุงู: 2026-01-28)"
              />
              <input id="mCountry" placeholder="ุงูุฏููุฉ" />
              <input id="mNotes" placeholder="ููุงุญุธุงุช" />
            </div>

            <div class="admin-row admin-row--wrap">
              <input id="mPhoto" type="file" accept="image/*" />
              <button id="mAddBtn" class="btn btn--solid" type="button">
                โ ุฅุถุงูุฉ
              </button>
              <small class="muted" id="mMsg"></small>
            </div>

            <div class="hint">
              * ูู ุงูุตูุฑุฉ ูุจูุฑุฉ ููู ุงูุฃูุถู ูุง ุชุฑูุนูุงุด ุฏูููุชู (ุนุดุงู ุญุฌู
              Firestore)
            </div>
          </div>

          <div class="admin-split"></div>

          <div class="admin-section__head">
            <h2>ุงููุชุทูุนูู (Approved)</h2>
            <div class="hint">* ุงูุจูุงูุงุช ุชุธูุฑ ููุฃุฏูู ููุท</div>
          </div>

          <div class="admin-row admin-row--wrap" style="margin: 10px 0 14px">
            <button id="deleteSelected" class="btn btn--outline" type="button">
              ๐๏ธ ูุณุญ ุงููุญุฏุฏ
            </button>
            <button id="clearSelection" class="btn btn--outline" type="button">
              โ๏ธ ุฅูุบุงุก ุงูุชุญุฏูุฏ
            </button>
          </div>

          <div class="tableWrap">
            <table>
              <thead>
                <tr>
                  <th><input type="checkbox" id="selectAll" /></th>
                  <th>ููุช</th>
                  <th>ุตูุฑุฉ</th>
                  <th>ุงุณู ุงููุชุทูุน</th>
                  <th>Volunteer ID</th>
                  <th>ุฑูู ุงููุชุทูุน</th>
                  <th>ุงูุฌูุณ</th>
                  <th>ุชุงุฑูุฎ ุงูุงูุถูุงู</th>
                  <th>ุงูุณุงุนุงุช</th>
                  <th>ุงูุญุงูุฉ</th>
                  <th>ููุงุญุธุงุช</th>
                  <th>ุฅุฌุฑุงุก</th>
                </tr>
              </thead>
              <tbody id="rows"></tbody>
            </table>
          </div>
        </section>

        <!-- TASKS -->
        <section class="card admin-block">
          <div class="admin-section__head">
            <h2>๐งฉ ุฅุฏุงุฑุฉ ุงูููุงู</h2>
            <p class="muted" style="margin: 0">
              ููุง ุชูุฏุฑ ุชุถูู ูููุฉ ููุชุทูุน ูุนููู. ุงููุชุทูุน ูููุตูู ุฅุดุนุงุฑุ ูููุง ููุงูู
              ูุจุฏุฃ ุงูุนุฏุงุฏ (ุจุงูุณุงุนุงุช) ุชููุงุฆููุง.
            </p>
          </div>

          <div class="admin-grid-3">
            <div class="card admin-subcard">
              <label class="lbl">ุงุฎุชุงุฑ ุงููุชุทูุน</label>
              <select id="taskVolunteer">
                <option value="">ุชุญููู ุงููุชุทูุนูู...</option>
              </select>
              <div class="hint">
                * ุงููุงุฆูุฉ ุจุชุฌูุจ ุงููุชุทูุนูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช.
              </div>
            </div>

            <div class="card admin-subcard">
              <label class="lbl">ุนููุงู ุงููููุฉ</label>
              <input id="taskTitle" placeholder="ูุซุงู: ุชุฌููุฒ ุจูุณุช ููุฏุนูุฉ" />
              <div class="admin-grid-2" style="margin-top: 10px">
                <div class="field">
                  <label class="lbl" for="taskHours">ุงููุฏุฉ (ุณุงุนุงุช)</label>
                  <input id="taskHours" type="number" min="1" value="5" />
                </div>
                <div class="field">
                  <label class="lbl" for="taskPoints">โญ ุงูููุงุท</label>
                  <input
                    id="taskPoints"
                    type="number"
                    min="0"
                    value="10"
                    placeholder="ูุซูุงู 10"
                  />
                </div>
              </div>

              <label class="chk" style="margin-top: 10px">
                <input id="taskRequireProof" type="checkbox" />
                ูุชุทูุจ ุฅุซุจุงุช (ุตูุฑุฉ/PDF)
              </label>
            </div>

            <div class="card admin-subcard">
              <label class="lbl">ูุตู ุงููููุฉ</label>
              <textarea
                id="taskDesc"
                rows="6"
                placeholder="ุงูุชุจ ุชูุงุตูู ุงููููุฉ..."
              ></textarea>
              <button
                id="btnCreateTask"
                class="btn btn--solid"
                type="button"
                style="width: 100%; margin-top: 10px"
              >
                โ ุฅุฑุณุงู ุงููููุฉ
              </button>
            </div>
          </div>

          <div class="card admin-subcard" style="margin-top: 12px">
            <div class="admin-row admin-row--between">
              <h3 style="margin: 0">๐ ุฃุญุฏุซ ุงูููุงู</h3>
              <button
                id="btnRefreshTasks"
                class="btn btn--outline"
                type="button"
              >
                ุชุญุฏูุซ
              </button>
            </div>
            <div id="adminTasksList" class="admin-cards"></div>
          </div>
        </section>

        <!-- Proof approvals -->
        <section class="card admin-block">
          <div class="admin-section__head">
            <h2>๐ ุงุนุชูุงุฏ ุฅุซุจุงุชุงุช ุงูููุงู</h2>
            <div class="muted">
              ุฅุซุจุงุชุงุช Pending. ูู ุงููููุฉ requireProof โุ ุงูุงุนุชูุงุฏ ูุถูู
              ููุงุท/ุณุงุนุงุช ููููู ุงููููุฉ.
            </div>
          </div>
          <div class="tableWrap">
            <table>
              <thead>
                <tr>
                  <th>ุงูุชุงุฑูุฎ</th>
                  <th>Task ID</th>
                  <th>UID</th>
                  <th>ุงูุฅุซุจุงุช</th>
                  <th>ุงูุฅุฌุฑุงุก</th>
                </tr>
              </thead>
              <tbody id="subRows"></tbody>
            </table>
          </div>
        </section>

        <!-- โ Achievements gallery (real photos) -->
        <section class="card admin-block">
          <div class="admin-section__head">
            <h2>๐ผ๏ธ ุตูุฑ ุงูุฅูุฌุงุฒุงุช</h2>
            <div class="muted">ุงุฑูุน ุตูุฑ (ุชุธูุฑ ุชููุงุฆููุง ูู ุตูุญุฉ ุงูุฅูุฌุงุฒุงุช).</div>
          </div>

          <div class="admin-grid-3">
            <div class="card admin-subcard">
              <label class="lbl">ุงูุตูุฑุฉ (JPG/PNG)</label>
              <input id="achFile" type="file" accept="image/*" />
            </div>
            <div class="card admin-subcard">
              <label class="lbl">ูุตู ูุฎุชุตุฑ</label>
              <input id="achCaption" placeholder="ูุซุงู: ุชูุฒูุน ูุณุงุนุฏุงุช" />
              <button
                id="btnUploadAch"
                class="btn btn--solid"
                type="button"
                style="width: 100%; margin-top: 10px"
              >
                ุฑูุน ุงูุตูุฑุฉ
              </button>
              <div id="achMsg" class="muted" style="margin-top: 10px"></div>
            </div>
            <div class="card admin-subcard">
              <label class="lbl">ุขุฎุฑ ุงูุตูุฑ</label>
              <div id="achList" class="admin-cards"></div>
            </div>
          </div>
        </section>
      </main>
    </div>

    <script type="module" src="admin.js?v=20260207"></script>
    <div id="toast" class="toast" aria-live="polite"></div>

    <script>
      // Sidebar toggle (mobile)
      (function () {
        const burger = document.getElementById("adminBurger");
        const side = document.getElementById("adminSidebar");
        burger?.addEventListener("click", () =>
          side?.classList.toggle("is-open"),
        );
      })();

      if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
          navigator.serviceWorker.register("./sw.js").catch(console.error);
        });
      }
    </script>
  </body>
</html>
