<!doctype html>
<html lang="ar" dir="rtl">
  <head>
    <link rel="manifest" href="manifest.webmanifest" />
    <meta name="theme-color" content="#0b1620" />
    <link rel="icon" type="image/png" href="icon-192.png" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ูููู ุงูุดุฎุตู</title>
    <link rel="stylesheet" href="style.css?v=20260207012958" />
    <meta name="theme-color" content="#0b1620" />
  
<script>
/* โ Fix: Firebase Authorized Domain issue
   ุงูุชุญ ุงููุดุฑูุน ุนูู localhost ุจุฏู 127.0.0.1 */
try{
  if (location.hostname === "127.0.0.1") {
    const u = new URL(location.href);
    u.hostname = "localhost";
    location.replace(u.toString());
  }
}catch(e){}
</script>

<script src="./polyfills.js?v=20260207012958"></script>
<script src="./debug-overlay.js?v=20260207012958"></script>
<script>
/* โ Universal cache/SW fix (runs once per version) */
(async function() {
  try {
    const host = location.hostname;
    const isLocal = host === "localhost" || host === "127.0.0.1";
    if (isLocal) return;

    const key = "px_swfix_v";
    const v = "20260207012958";
    if (localStorage.getItem(key) === v) return;
    localStorage.setItem(key, v);

    if ("serviceWorker" in navigator) {
      const regs = await navigator.serviceWorker.getRegistrations();
      await Promise.all(regs.map(r => r.unregister()));
    }
    if (window.caches && caches.keys) {
      const keys = await caches.keys();
      await Promise.all(keys.map(k => caches.delete(k)));
    }
  } catch(e) {}
})();
</script>

</head>

  <body>
    <!-- TOP NAV -->
    <header class="topnav">
      <div class="container topnav__wrap">
        <a class="brand" href="index.html">
          <img src="p.jpg" alt="Pixology" style="width: 180px; height: 80px" />
        </a>

        <div class="topnav__actions">
          <a class="link" href="verify.html">โ ุชุญูู ุดูุงุฏุฉ</a>
          <a class="link" href="leaderboard.html">๐ ุงูุชุฑุชูุจ</a>
          <a class="link" href="events.html">๐ ุงููุนุงููุงุช</a>
          <a class="link" href="dashboard.html">๐ ุงูุฅุญุตุงุฆูุงุช</a>
          <button id="btnLogout" type="button" style="display: none">
            ุชุณุฌูู ุฎุฑูุฌ
          </button>
        </div>
      </div>
    </header>

    <main class="container" style="padding: 24px 0 70px">
    <!-- =========================
         NOTIFICATIONS + TASKS
    ========================== -->
    <section class="card" style="margin-top: 14px; padding: 18px; border-radius: 18px" id="tasks">
      <div style="display:flex; justify-content:space-between; gap:10px; align-items:center; flex-wrap:wrap">
        <h2 style="margin:0">๐ ุงูุฅุดุนุงุฑุงุช</h2>
        <button class="btn" id="btnMarkNotifs" type="button">ุชุญุฏูุฏ ุงููู ูููุฑูุก</button>
      </div>
      <div id="notifList" class="grid" style="margin-top:10px; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 12px"></div>
    </section>

    <section class="card" style="margin-top: 14px; padding: 18px; border-radius: 18px">
      <div style="display:flex; justify-content:space-between; gap:10px; align-items:center; flex-wrap:wrap">
        <h2 style="margin:0">๐งฉ ููุงูู</h2>
        <button class="btn" id="btnRefreshMyTasks" type="button">ุชุญุฏูุซ</button>
      </div>
      <p style="margin:8px 0 0; color:#64748b; line-height:1.8">
        ููุง ุชุฏูุณ โููุงููุฉโ ุนูู ุงููููุฉุ ุงูุนุฏุงุฏ ูุจุฏุฃ ููุฑูุง ุญุณุจ ุนุฏุฏ ุงูุณุงุนุงุช.
      </p>
      <div id="myTasksList" class="grid" style="margin-top:10px; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 12px"></div>
    </section>

      <!-- ุจุทุงูุฉ ุงูููู -->
      <div class="v-card" style="padding: 18px">
        <h2 style="margin: 0 0 14px">ูููู ุงูุดุฎุตู</h2>

        <p id="msg" class="muted" style="margin: 0 0 14px; display: none"></p>

        <div
          style="display: flex; gap: 16px; align-items: center; flex-wrap: wrap"
        >
          <div
            id="pPhoto"
            style="
              width: 84px;
              height: 84px;
              border-radius: 18px;
              background: #0b2230;
              border: 1px solid rgba(255, 255, 255, 0.1);
              overflow: hidden;
              display: grid;
              place-items: center;
              color: #fff;
              font-weight: 800;
              font-size: 28px;
            "
          >
            โ
          </div>

          <div style="min-width: 260px">
            <div style="font-weight: 800; font-size: 18px" id="pName">โ</div>
            <div class="muted" id="pEmail" style="margin-top: 6px">โ</div>
          </div>
        </div>

        <hr
          style="margin: 16px 0; border: 0; border-top: 1px solid var(--border)"
        />

        <div style="display: grid; gap: 10px">
          <div>
            <b>UID:</b> <span id="pUid">โ</span>
            <button
              id="btnCopyUid"
              class="btn btn--outline"
              type="button"
              style="margin-inline-start: 10px"
            >
              ูุณุฎ UID
            </button>
          </div>

          <div><b>ุขุฎุฑ ุชุณุฌูู ุฏุฎูู:</b> <span id="pLast">โ</span></div>

          <div><b>ุงูููุน (Role):</b> <span id="pRole">โ</span></div>
          <div><b>ุงูุญุงูุฉ (Active):</b> <span id="pActive">โ</span></div>

          <div
            style="display: flex; gap: 10px; flex-wrap: wrap; margin-top: 6px"
          >
            <a
              id="pPublicLink"
              class="btn btn--solid"
              href="#"
              style="display: none"
            >
              ูุชุญ ุตูุญุชู ุงูุนุงูุฉ
            </a>

            <button
              id="btnCopyPublic"
              class="btn btn--outline"
              type="button"
              style="display: none"
            >
              ูุณุฎ ุฑุงุจุท ุงูููู ุงูุนุงู
            </button>

            <button id="btnPDF" class="btn btn--outline" type="button">
              ุชุญููู ุชูุฑูุฑ PDF
            </button>

            <button
              id="btnResetRole"
              class="btn btn--outline"
              type="button"
              style="display: none"
            >
              ุชุบููุฑ ุงูููุน (ูุชุทูุน/ูุคุณุณุฉ)
            </button>

            <button id="btnClearDevice" class="btn btn--outline" type="button">
              ูุณุญ ุจูุงูุงุช ุงูุฌูุงุฒ
            </button>
          </div>
        </div>
      </div>

      <!-- ุจุทุงูุฉ ุงูููุงุท ูุงููุณุชูู -->
      <div class="v-card" style="margin-top: 14px; padding: 16px">
        <h3 style="margin: 0 0 10px">ุงูููุงุท ูุงููุณุชูู</h3>

        <div
          style="display: flex; gap: 14px; flex-wrap: wrap; align-items: center"
        >
          <div
            style="
              min-width: 120px;
              padding: 10px 14px;
              border-radius: 14px;
              border: 1px solid var(--border);
              background: var(--card);
            "
          >
            <div class="muted">ุงูููุงุท</div>
            <div style="font-size: 24px; font-weight: 900" id="pPoints">โ</div>
          </div>

          <div style="flex: 1; min-width: 220px">
            <div
              style="
                display: flex;
                justify-content: space-between;
                margin-bottom: 6px;
              "
            >
              <span class="muted">ุงููุณุชูู</span>
              <b id="pLevel">โ</b>
            </div>

            <div
              style="
                height: 12px;
                background: rgba(0, 0, 0, 0.08);
                border-radius: 999px;
                overflow: hidden;
                border: 1px solid var(--border);
              "
            >
              <div
                id="pBar"
                style="height: 100%; width: 0%; background: var(--gold-600)"
              ></div>
            </div>

            <div class="muted" style="margin-top: 6px" id="pNext">โ</div>
          </div>
        </div>

        <div style="margin-top: 12px; display: flex; gap: 8px; flex-wrap: wrap">
          <span
            id="b1"
            style="
              display: none;
              padding: 6px 10px;
              border-radius: 999px;
              border: 1px solid var(--border);
              background: var(--card);
            "
            >๐ ูุดูุท</span
          >
          <span
            id="b2"
            style="
              display: none;
              padding: 6px 10px;
              border-radius: 999px;
              border: 1px solid var(--border);
              background: var(--card);
            "
            >โญ ูููุฒ</span
          >
          <span
            id="b3"
            style="
              display: none;
              padding: 6px 10px;
              border-radius: 999px;
              border: 1px solid var(--border);
              background: var(--card);
            "
            >๐ ุฎุจูุฑ</span
          >
        </div>
      </div>

      <!-- ุจุทุงูุฉ ุงูุฅุญุตุงุฆูุงุช -->
      <div class="v-card" style="margin-top: 14px; padding: 16px">
        <h3 style="margin: 0 0 10px">ุฅุญุตุงุฆูุงุชู</h3>

        <div
          style="
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 12px;
          "
        >
          <div
            style="
              padding: 12px;
              border-radius: 14px;
              border: 1px solid var(--border);
              background: var(--card);
            "
          >
            <div class="muted">ุงูุณุงุนุงุช</div>
            <div style="font-size: 22px; font-weight: 900" id="sHours">โ</div>
          </div>

          <div
            style="
              padding: 12px;
              border-radius: 14px;
              border: 1px solid var(--border);
              background: var(--card);
            "
          >
            <div class="muted">ุงููุดุงุฑูุงุช</div>
            <div style="font-size: 22px; font-weight: 900" id="sEvents">โ</div>
          </div>

          <div
            style="
              padding: 12px;
              border-radius: 14px;
              border: 1px solid var(--border);
              background: var(--card);
            "
          >
            <div class="muted">ุชุงุฑูุฎ ุงูุงูุถูุงู</div>
            <div style="font-size: 16px; font-weight: 900" id="sJoin">โ</div>
          </div>

          <div
            style="
              padding: 12px;
              border-radius: 14px;
              border: 1px solid var(--border);
              background: var(--card);
            "
          >
            <div class="muted">ุขุฎุฑ ุชุญุฏูุซ</div>
            <div style="font-size: 16px; font-weight: 900" id="sUpdate">โ</div>
          </div>
        </div>
      </div>
      <div class="v-card" style="margin-top: 14px; padding: 16px">
        <h3 style="margin: 0 0 10px">๐งฉ ุงูุชุงุณูุงุช</h3>
        <div id="taskList" style="display: grid; gap: 10px">
          <p class="muted">ูุง ุชูุฌุฏ ุชุงุณูุงุช</p>
        </div>
      </div>

      <!-- ุจุทุงูุฉ ุงูุฅุดุนุงุฑุงุช -->
      <div class="v-card" style="margin-top: 14px; padding: 16px">
        <h3 style="margin: 0 0 10px">๐ ุงูุฅุดุนุงุฑุงุช</h3>
        <div id="notifyList" style="display: grid; gap: 10px">
          <p class="muted">ูุง ููุฌุฏ ุฅุดุนุงุฑุงุช</p>
        </div>
      </div>
    
    <section class="card" style="margin-top:14px; padding:16px; border-radius:18px">
      <div class="grid" style="grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 12px">
        <div class="card" style="padding:14px; border-radius:16px">
          <div style="color:#64748b; font-weight:800">โญ ููุงุทู</div>
          <div id="pointsValue" style="font-size:28px; font-weight:950; margin-top:6px">โ</div>
          <div style="color:#64748b; margin-top:6px; line-height:1.8">ุชุฒูุฏ ุชููุงุฆููุง ุนูุฏ ุฅููุงุก ุงูููุงู.</div>
        </div>
        <div class="card" style="padding:14px; border-radius:16px">
          <div style="color:#64748b; font-weight:800">๐ ุชุฑุชูุจู</div>
          <div id="rankValue" style="font-size:28px; font-weight:950; margin-top:6px">โ</div>
          <div style="color:#64748b; margin-top:6px; line-height:1.8">ุญุณุจ ุฅุฌูุงูู ุงูููุงุท ุจูู ุงููุชุทูุนูู.</div>
        </div>
      </div>
    </section>

</main>

    <script type="module" src="my-profile.js?v=20260207012958"></script>
  </body>
</html>
