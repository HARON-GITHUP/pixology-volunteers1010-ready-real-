<!doctype html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>ูุคุณุณุฉ ุจููุณูููุฌู</title>

    <link rel="manifest" href="manifest.webmanifest" />
    <meta name="theme-color" content="#0b1620" />
    <link rel="icon" type="image/png" href="icon-192.png" />
    <link rel="stylesheet" href="style.css?v=20260207012958" />

    <!-- โ ููุน SW ูุงููุงุด ุนูู localhost (ููููู ููุถูุน ุงููุณุญ ูู ุดููุฉ) -->
    <script>
      (async function () {
        try {
          const host = location.hostname;
          const isLocal = host === "localhost" || host === "127.0.0.1";

          if (!("serviceWorker" in navigator)) return;

          if (isLocal) {
            const regs = await navigator.serviceWorker.getRegistrations();
            await Promise.all(regs.map((r) => r.unregister()));
            if (window.caches && caches.keys) {
              const keys = await caches.keys();
              await Promise.all(keys.map((k) => caches.delete(k)));
            }
            console.log("โ SW disabled on localhost");
          }
        } catch (e) {}
      })();
    </script>

    <!-- โ Fix: Firebase auth domains (ุญููู 127 -> localhost) -->
    <script>
      try {
        if (location.hostname === "127.0.0.1") {
          const u = new URL(location.href);
          u.hostname = "localhost";
          location.replace(u.toString());
        }
      } catch (e) {}
    </script>

    <!-- ุงุฎุชูุงุฑู: polyfills -->
    <script src="./polyfills.js?v=20260207012958"></script>

    <!-- โ๏ธ ููู: ุจูุงุด ุชูุฑุฑ debug-overlay ูุฑุชูู -->
    <script src="./debug-overlay.js?v=20260207012958"></script>

    <!-- โ๏ธ ููุงุญุธุฉ ูููุฉ: window.onerror ุจูุบุทู ุงูุตูุญุฉ ูููุงุ ุฎููู ูุนุฑุถ ุฑุณุงูุฉ ุจุณ ุจุฏูู ูุณุญ ุงูู DOM -->
    <script>
      window.onerror = function (msg, url, line) {
        console.error("GlobalError:", msg, url, line);
        // ุจุฏู ูุง ููุณุญ body ููู:
        const box = document.createElement("div");
        box.style.cssText =
          "position:fixed;inset:16px;max-width:720px;margin:auto;height:max-content;padding:16px;border:1px solid #ffb4b4;background:#fff3f3;color:#7a0000;border-radius:12px;font-family:system-ui;z-index:999999";
        box.innerHTML = `
          <b>โ๏ธ ุญุตู ุฎุทุฃ</b>
          <div style="margin-top:8px;line-height:1.8">
            ${String(msg)}
            <div style="margin-top:10px;color:#555;font-size:13px">
              ${String(url || "")} : ${String(line || "")}
            </div>
          </div>
          <div style="margin-top:12px;display:flex;gap:10px;justify-content:center">
            <button onclick="location.reload()" style="padding:10px 14px;border-radius:10px;border:0;cursor:pointer">ุฅุนุงุฏุฉ ุชุญููู</button>
          </div>
        `;
        document.body.appendChild(box);
        return true;
      };
    </script>
  </head>

  <body>
    <!-- TOP NAV -->
    <header class="topnav">
      <div class="container topnav__wrap">
        <a class="brand" href="index.html">
          <img src="p.jpg" alt="Pixology" style="width: 180px; height: 80px" />
        </a>

        <div class="topnav__actions" style="position: relative">
          <button class="link link--btn" id="langToggle" type="button">
            EN
          </button>

          <button id="btnLogin" class="link link--btn" type="button">
            ุชุณุฌูู / ุฅูุดุงุก ุญุณุงุจ
          </button>

          <!-- โ MENU ูุงุญุฏุฉ ููุท -->
          <div id="loginMenu" class="login-menu" style="display: none">
            <button id="loginGoogle" class="login-btn" type="button">
              ุงูุชุณุฌูู ุจุงุณุชุฎุฏุงู Google
            </button>
          </div>

          <a
            class="link"
            href="my-profile.html"
            id="myProfileLink"
            style="display: none"
          >
            ูููู ุงูุดุฎุตู
          </a>

          <a class="link" href="contact.html" data-i18n="navContact">ุฑุงุณููุง</a>
          <a class="link" href="about.html" data-i18n="navAbout">ูู ูุญู</a>
          <a class="link" href="admin.html" data-i18n="navAdmin">ููุญุฉ ุงูุชุญูู</a>
          <a class="link" href="tasks.html">๐งฉ ููุงูู</a>
          <a class="link" href="certificates.html" data-i18n="navCerts"
            >๐ ูู ุงูุดูุงุฏุงุช</a
          >
          <a class="link" href="achievements.html">๐ ุงูุฅูุฌุงุฒุงุช</a>

          <a class="btn btn--solid" href="register.html" data-i18n="navApply">
            ุชูุฏูู ุทูุจ ุชุทูุน
          </a>
        </div>
      </div>
    </header>

    <!-- HERO -->
    <section class="hero">
      <div class="hero__bg"></div>
      <div class="hero__pattern" aria-hidden="true"></div>

      <div class="course-card__img hero-img">
        <div class="hero-text">
          <span class="badge-count">
            <span data-i18n="reqLabel">ุงูุทูุจุงุช</span>
            <b id="reqCount">โ</b>
          </span>
          <span class="badge-type">
            <span data-i18n="volLabel">ุงููุชุทูุนูู</span>
            <b id="volCount">โ</b>
          </span>

          <h2 data-i18n="brandTitle">Pixology Foundation</h2>
          <p data-i18n="brandSub">ูุคุณุณุฉ ุจููุณูููุฌู ููุณูุงู ูุงูุชูููุฉ</p>
        </div>
      </div>
    </section>

    <!-- SECTION TITLE -->
    <section class="section-title">
      <div class="container section-title__wrap">
        <h2 class="section-title__h">
          <span data-i18n="secVolTitle">ุงููุชุทูุนูู</span>
          <span data-i18n="secVolTitleSpan">ุงููุนุชูุฏูู</span>
        </h2>
        <div class="section-title__lines" aria-hidden="true">
          <span></span><span></span>
        </div>
      </div>
    </section>

    <!-- FILTER TOOLS -->
    <section class="tools container">
      <div class="tools__row">
        <input
          id="courseSearch"
          class="tools__input"
          type="text"
          placeholder="ุงุจุญุซ ุนู ูุชุทูุน..."
          data-i18n-placeholder="searchPh"
        />

        <select id="filterGender" class="tools__select">
          <option value="" data-i18n-option="genderPh">ุงูุฌูุณ</option>
          <option value="ุฐูุฑ" data-i18n-option="male">ุฐูุฑ</option>
          <option value="ุงูุซู" data-i18n-option="female">ุงูุซู</option>
        </select>

        <select id="filterGrade" class="tools__select">
          <option value="" data-i18n-option="sortPh">ุงูุชุฑุชูุจ</option>
          <option value="ุงูุจุฑ ุนุฏุฏ ุณุงุนุงุช" data-i18n-option="sortHigh">
            ุฃูุจุฑ ุนุฏุฏ ุณุงุนุงุช
          </option>
          <option value="ุงูู ุนุฏุฏ ุณุงุนุงุช" data-i18n-option="sortLow">
            ุฃูู ุนุฏุฏ ุณุงุนุงุช
          </option>
        </select>

        <button
          id="clearFilters"
          class="btn btn--outline"
          type="button"
          data-i18n="clear"
        >
          ูุณุญ
        </button>
      </div>

      <div class="tools__meta" id="resultWrap">
        <span id="resultCount">0</span>
        <span data-i18n="volunteersWord">ูุชุทูุน</span>
      </div>
    </section>

    <!-- VOLUNTEERS GRID -->
    <main class="container">
      <section
        class="grid"
        id="volGrid"
        aria-label="ูุงุฆูุฉ ุงููุชุทูุนูู ุงููุนุชูุฏูู"
      ></section>
    </main>

    <!-- FOOTER -->
    <footer class="footer">
      <div class="container footer__wrap">
        <div class="footer__center">
          <img
            src="p.jpg"
            alt="Pixology"
            loading="lazy"
            decoding="async"
            onerror="this.src = 'p.jpg'"
          />

          <p class="footer__note" data-i18n="footerNote">
            ุชู ุฅูุดุงุก ูุฐู ุงูููุตุฉ ูุชูุซูู ุงููุชุทูุนูู ูุฅุจุฑุงุฒ ุฅูุฌุงุฒุงุชูู ุจุดูู ุฑุณูู.
          </p>

          <a href="mailto:info@pixologyfoundation.org"
            >info@pixologyfoundation.org</a
          >
        </div>
      </div>
    </footer>

    <!-- โ i18n -->
    <script src="i18n.js?v=20260207012958"></script>

    <!-- โ Firebase module -->
    <script type="module" src="index.js?v=20260207012958"></script>
  </body>
</html>
